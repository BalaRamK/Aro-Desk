(()=>{var e={};e.id=70,e.ids=[70],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},64939:e=>{"use strict";e.exports=import("pg")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},8835:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>i});var r=a(70260),s=a(28203),d=a(25155),l=a.n(d),n=a(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(t,c);let i=["",{children:["dashboard",{children:["accounts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,47990)),"/Volumes/Extreme SSD/Aro Desk/app/dashboard/accounts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,83748)),"/Volumes/Extreme SSD/Aro Desk/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,19611)),"/Volumes/Extreme SSD/Aro Desk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"]}],o=["/Volumes/Extreme SSD/Aro Desk/app/dashboard/accounts/page.tsx"],x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/accounts/page",pathname:"/dashboard/accounts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},36464:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{"0004aa8566c1f3e312cb7f3e3813d6157b8fb58a8b":()=>s.VM,"005425e0a812709ce540c323e485343a1ac42fce8e":()=>d.Q1,"007c7f942aadb8dbc8cc2b6b30f60982431f70127f":()=>s.Kd,"009a4985819b97b4be2fe1cdb32c9df11877379ad4":()=>s.Ht,"00c51daf9dff5a256b21999797c4e988b3e5114375":()=>d.HB,"00dc1677d24c5ceadcc7273a31ef52a63def6788d0":()=>d.mf,"402950729f574cd9671c0cabe09d6b2f7bc109631e":()=>d.P4,"402d0d22c145eada57fb25e0c590e564864c8c79b2":()=>d.qO,"404277a33f7cb0ce1f7247add59deea9a766c2d7db":()=>s.Lz,"40982a859ec3c46a1b6607285e686490468d9e8108":()=>s.zP,"40a26f5e0a796fc4965d4d28aa51508a107d704968":()=>d.xP,"40ac348b21dd335ce9d63d26c1939b25abc541f965":()=>d.yW,"40b79742bcbf00dfdf85e2af52cbbed0924121a839":()=>d.ND,"40bd541fc16e4b03c33c1297531f2e89d59c364b4e":()=>s.RX,"40d355824c03bd8e1cb0730e5dd1e86a630707aa5b":()=>d.hd,"608c42a796b1bf12ec0a4ee124c2f68213455f2758":()=>d.o2,"70d502ab1ee2046d48b5b61eec9c7acffedf7bbd95":()=>d.N9});var s=a(35603),d=a(13311),l=e([s,d]);[s,d]=l.then?(await l)():l,r()}catch(e){r(e)}})},14112:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,59607,23))},43488:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,28531,23))},47990:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>m});var s=a(62740),d=a(13311),l=a(19935),n=a(52216),c=a(39909),i=a(59607),o=a.n(i),x=a(54917),u=e([d]);async function m({searchParams:e}){let t=await e??{},a={},r=t.range?parseInt(t.range,10):null,i=t.start||"",u=t.end||"";if(r&&!Number.isNaN(r)){let e=new Date,t=new Date;t.setDate(e.getDate()-(r-1)),i=t.toISOString().slice(0,10),u=e.toISOString().slice(0,10)}t.q&&(a.searchTerm=t.q),t.health&&(a.healthFilter=t.health),t.stage&&(a.stageFilter=t.stage),i&&(a.startDate=i),u&&(a.endDate=u);let[m,h]=await Promise.all([(0,d.P4)(a),(0,d.mf)()]),f=e=>e?e>=70?"text-green-600":e>=40?"text-yellow-600":"text-red-600":"text-slate-400",b=e=>e?e>=70?(0,s.jsx)(n.E,{className:"bg-green-500",children:"Healthy"}):e>=40?(0,s.jsx)(n.E,{className:"bg-yellow-500",children:"At Risk"}):(0,s.jsx)(n.E,{variant:"destructive",children:"Critical"}):(0,s.jsx)(n.E,{variant:"secondary",children:"No Data"});return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Account360"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"View and manage all customer accounts with hierarchical structure"})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Filters"}),(0,s.jsx)(l.BT,{children:"Refine the list by name, health, stage, and date window"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("form",{method:"GET",className:"grid gap-3 md:grid-cols-7 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-slate-500",children:"Search"}),(0,s.jsx)("input",{name:"q",defaultValue:t.q||"",placeholder:"Account name or keyword",className:"mt-1 w-full border rounded-md p-2 text-sm bg-white dark:bg-slate-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-slate-500",children:"Health"}),(0,s.jsxs)("select",{name:"health",defaultValue:t.health||"",className:"mt-1 w-full border rounded-md p-2 text-sm bg-white dark:bg-slate-900",children:[(0,s.jsx)("option",{value:"",children:"Any"}),(0,s.jsx)("option",{value:"Healthy",children:"Healthy"}),(0,s.jsx)("option",{value:"At Risk",children:"At Risk"}),(0,s.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-slate-500",children:"Stage"}),(0,s.jsxs)("select",{name:"stage",defaultValue:t.stage||"",className:"mt-1 w-full border rounded-md p-2 text-sm bg-white dark:bg-slate-900",children:[(0,s.jsx)("option",{value:"",children:"Any"}),h.map(e=>(0,s.jsx)("option",{value:e.stage,children:e.stage},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-slate-500",children:"Start Date"}),(0,s.jsx)("input",{type:"date",name:"start",defaultValue:i,className:"mt-1 w-full border rounded-md p-2 text-sm bg-white dark:bg-slate-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-slate-500",children:"End Date"}),(0,s.jsx)("input",{type:"date",name:"end",defaultValue:u,className:"mt-1 w-full border rounded-md p-2 text-sm bg-white dark:bg-slate-900"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500 w-full",children:"Quick ranges"}),[{label:"Last 7d",value:"7"},{label:"Last 30d",value:"30"},{label:"Last 90d",value:"90"}].map(e=>(0,s.jsx)("button",{type:"submit",name:"range",value:e.value,className:`border rounded-md px-3 py-2 text-sm ${t.range===e.value?"bg-slate-200 dark:bg-slate-800":""}`,title:`Set date window to ${e.label}`,children:e.label},e.value))]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"border rounded-md px-3 py-2 text-sm",children:"Apply"}),(0,s.jsx)(o(),{href:"/dashboard/accounts",className:"border rounded-md px-3 py-2 text-sm",children:"Reset"})]})]})})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"All Accounts"}),(0,s.jsx)(l.BT,{children:"Click any account to view detailed health metrics, telemetry, and CRM data"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)(c.XI,{children:[(0,s.jsx)(c.A0,{children:(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nd,{title:"Click to open the account detail",children:"Account Name"}),(0,s.jsx)(c.nd,{title:"Parent/child positioning",children:"Hierarchy"}),(0,s.jsx)(c.nd,{title:"Latest lifecycle stage",children:"Stage"}),(0,s.jsx)(c.nd,{title:"Annual recurring revenue from CRM",children:"ARR"}),(0,s.jsx)(c.nd,{title:"Lifecycle-adjusted overall health",children:"Health Score"}),(0,s.jsx)(c.nd,{title:"Assigned customer success manager",children:"CSM"}),(0,s.jsx)(c.nd,{className:"w-12"})]})}),(0,s.jsx)(c.BF,{children:m.map(e=>(0,s.jsxs)(c.Hj,{className:"hover:bg-slate-50 dark:hover:bg-slate-800",children:[(0,s.jsx)(c.nA,{children:(0,s.jsx)(o(),{href:`/dashboard/accounts/${e.id}`,className:"font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400",children:e.name})}),(0,s.jsx)(c.nA,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{style:{paddingLeft:`${16*e.hierarchy_level}px`},children:e.parent_id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-slate-400",children:"└─"}),(0,s.jsxs)("span",{className:"text-xs text-slate-500 ml-2",children:["under ",e.parent_name]})]}):(0,s.jsx)(n.E,{variant:"outline",title:"Top-level parent account",children:"Parent"})})})}),(0,s.jsx)(c.nA,{children:(0,s.jsx)(n.E,{variant:"secondary",title:"Current lifecycle stage",children:e.current_stage||"Not Set"})}),(0,s.jsxs)(c.nA,{children:["$",e.crm_attributes?.arr?parseInt(e.crm_attributes.arr).toLocaleString():"N/A"]}),(0,s.jsx)(c.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:`font-semibold ${f(e.overall_score)}`,children:e.overall_score||"N/A"}),b(e.overall_score)]})}),(0,s.jsx)(c.nA,{className:"text-sm text-slate-600",children:e.csm_name||"Unassigned"}),(0,s.jsx)(c.nA,{children:(0,s.jsx)(o(),{href:`/dashboard/accounts/${e.id}`,children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-slate-400"})})})]},e.id))})]})})]})]})}d=(u.then?(await u)():u)[0],r()}catch(e){r(e)}})},52216:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var r=a(62740);a(76301);var s=a(67699),d=a(55946);let l=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,...a}){return(0,r.jsx)("div",{className:(0,d.cn)(l({variant:t}),e),...a})}},19935:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n});var r=a(62740),s=a(76301),d=a(55946);let l=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));l.displayName="Card";let n=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("h3",{ref:a,className:(0,d.cn)("font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let i=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("p",{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));i.displayName="CardDescription";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,d.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,d.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},39909:(e,t,a)=>{"use strict";a.d(t,{A0:()=>n,BF:()=>c,Hj:()=>i,XI:()=>l,nA:()=>x,nd:()=>o});var r=a(62740),s=a(76301),d=a(55946);let l=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,d.cn)("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let n=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("thead",{ref:a,className:(0,d.cn)("[&_tr]:border-b",e),...t}));n.displayName="TableHeader";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("tbody",{ref:a,className:(0,d.cn)("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("tfoot",{ref:a,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let i=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("tr",{ref:a,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));i.displayName="TableRow";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("th",{ref:a,className:(0,d.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));o.displayName="TableHead";let x=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("td",{ref:a,className:(0,d.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));x.displayName="TableCell",s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("caption",{ref:a,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},55946:(e,t,a)=>{"use strict";a.d(t,{cn:()=>d});var r=a(13673),s=a(47317);function d(...e){return(0,s.QP)((0,r.$)(e))}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,720,145,464,527,226],()=>a(8835));module.exports=r})();