(()=>{var e={};e.id=524,e.ids=[524],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},64939:e=>{"use strict";e.exports=import("pg")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},36119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(70260),a=s(28203),n=s(25155),i=s.n(n),l=s(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["accounts",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97506)),"/Volumes/Extreme SSD/Aro Desk/app/dashboard/accounts/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,83748)),"/Volumes/Extreme SSD/Aro Desk/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Volumes/Extreme SSD/Aro Desk/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Volumes/Extreme SSD/Aro Desk/app/dashboard/accounts/[id]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/accounts/[id]/page",pathname:"/dashboard/accounts/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},47790:(e,t,s)=>{Promise.resolve().then(s.bind(s,69474)),Promise.resolve().then(s.bind(s,20537)),Promise.resolve().then(s.bind(s,11844)),Promise.resolve().then(s.bind(s,36805)),Promise.resolve().then(s.t.bind(s,59607,23))},38561:(e,t,s)=>{Promise.resolve().then(s.bind(s,68680)),Promise.resolve().then(s.bind(s,68653)),Promise.resolve().then(s.bind(s,71227)),Promise.resolve().then(s.bind(s,69193)),Promise.resolve().then(s.t.bind(s,28531,23))},68680:(e,t,s)=>{"use strict";s.d(t,{SendReengagementEmailButton:()=>o});var r=s(45512),a=s(58009),n=s(87021),i=s(26248);let l=(0,i.createServerReference)("60801f958c5c2cd740f6d50ccb360f01b5977ffb89",i.callServer,void 0,i.findSourceMapURL,"triggerAiFollowUpAction");function o({accountId:e,context:t}){let[s,i]=(0,a.useTransition)(),[o,c]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.$,{variant:"outline",className:"w-full justify-start",disabled:s,onClick:()=>{i(async()=>{let s=await l(e,t||{});if(s.error){alert(s.error);return}c(s.email_body||""),alert("AI follow-up generated and logged")})},children:s?"Generating…":"Send Re-engagement Email"}),o&&(0,r.jsxs)("div",{className:"text-xs p-2 border rounded-md bg-slate-50 dark:bg-slate-900/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Preview"}),(0,r.jsx)(n.$,{variant:"secondary",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(o),alert("Copied to clipboard")}catch(e){alert("Copy failed")}},children:"Copy"})]}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:o})]})]})}},68653:(e,t,s)=>{"use strict";s.d(t,{PlanProgress:()=>i,SentimentSparkline:()=>n,Sparkline:()=>a});var r=s(45512);function a({data:e,width:t=160,height:s=40,stroke:a="#3b82f6"}){if(!e||0===e.length)return(0,r.jsx)("div",{className:"text-xs text-slate-500",children:"No data"});let n=Math.max(...e),i=Math.min(...e),l=n-i||1,o=e.map((r,a)=>{let n=a/(e.length-1)*t,o=s-(r-i)/l*s;return`${n},${o}`}).join(" ");return(0,r.jsx)("svg",{width:t,height:s,className:"overflow-visible",children:(0,r.jsx)("polyline",{fill:"none",stroke:a,strokeWidth:2,points:o})})}function n({scores:e,width:t=160,height:s=40}){let a=e=>e<-.2?"#ef4444":e>.2?"#10b981":"#6b7280";if(!e||0===e.length)return(0,r.jsx)("div",{className:"text-xs text-slate-500",children:"No data"});let n=Math.max(...e),i=Math.min(...e),l=n-i||1,o=e.map((r,a)=>({x:a/(e.length-1)*t,y:s-(r-i)/l*s,v:r})),c=o.map(e=>`${e.x},${e.y}`).join(" ");return(0,r.jsxs)("svg",{width:t,height:s,children:[(0,r.jsx)("polyline",{fill:"none",stroke:"#6b7280",strokeWidth:2,points:c}),o.map((e,t)=>(0,r.jsx)("circle",{cx:e.x,cy:e.y,r:2,fill:a(e.v)},t))]})}function i({completed:e,total:t,width:s=160,height:a=8}){let n=t>0?Math.round(e/t*100):0;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{style:{width:s,height:a},className:"bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,r.jsx)("div",{style:{width:`${n}%`,height:a},className:"bg-green-500"})}),(0,r.jsxs)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:[e,"/",t]})]})}s(58009)},87021:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(45512),a=s(58009),n=s(12705),i=s(21643),l=s(59462);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},c)=>{let d=a?n.DX:"button";return(0,r.jsx)(d,{className:(0,l.cn)(o({variant:t,size:s,className:e})),ref:c,...i})});c.displayName="Button"},71227:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>d});var r=s(45512),a=s(58009),n=s(30830),i="horizontal",l=["horizontal","vertical"],o=a.forwardRef((e,t)=>{let{decorative:s,orientation:a=i,...o}=e,c=l.includes(a)?a:i;return(0,r.jsx)(n.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:t})});o.displayName="Separator";var c=s(59462);let d=a.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},n)=>(0,r.jsx)(o,{ref:n,decorative:s,orientation:t,className:(0,c.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));d.displayName=o.displayName},69193:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>l,TabsContent:()=>d,TabsList:()=>o,TabsTrigger:()=>c});var r=s(45512),a=s(58009),n=s(41046),i=s(59462);let l=n.bL,o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=n.B8.displayName;let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));c.displayName=n.l9.displayName;let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));d.displayName=n.UC.displayName},26248:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return a.findSourceMapURL}});let r=s(17295),a=s(32035),n=s(28832).createServerReference},97506:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>T});var a=s(62740),n=s(13311),i=s(66471),l=s(19935),o=s(52216),c=s(36805),d=s(11844),m=s(7248),x=s(68165),u=s(82855),h=s(48413),p=s(8902),f=s(66092),v=s(20796),g=s(98357),j=s(12503),b=s(8413),y=s(55326),N=s(20537),w=s(69474),k=s(59607),S=s.n(k),_=s(31831),A=s(46655),C=e([n,i]);async function T({params:e}){var t;let{id:s}=await e,r=await (0,n.qO)(s);r&&r.account||(0,_.notFound)();let{account:k,subsidiaries:C,journey:T,metrics:R}=r,P=await (0,i.i2)(s,12),E=await (0,i.om)(s,12),M=await (0,i._J)(s,20),D=await (0,i.MM)(s,20),B=await (0,i.q2)(s,30),$=await (0,i.Ah)(s),Z={};for(let e of $)Z[e.id]=await (0,i.Rc)(e.id);let L=await (0,i.yS)(s,20);k.hierarchy_path?.split(".");let V={usage:[...E].reverse().map(e=>Number(e.usage_score||0)),engagement:[...E].reverse().map(e=>Number(e.engagement_score||0)),support:[...E].reverse().map(e=>Number(e.support_sentiment_score||0)),adoption:[...E].reverse().map(e=>Number(e.adoption_score||0))},q=[...P].reverse().map(e=>Number(e.score||0));return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[(0,a.jsx)(S(),{href:"/dashboard/accounts",className:"hover:text-slate-700",children:"Accounts"}),k.parent_name&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{children:k.parent_name})]}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-slate-900 dark:text-slate-100 font-medium",children:k.name})]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:k.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,a.jsx)(o.E,{variant:"outline",children:k.current_stage||"Not Set"}),(0,a.jsx)(o.E,{className:k.parent_id?"bg-slate-500":"bg-blue-500",children:k.parent_id?"Subsidiary":"Parent Account"}),(0,a.jsx)(o.E,{variant:"Active"===k.status?"default":"secondary",children:k.status})]})]}),(0,a.jsx)("div",{className:`flex items-center justify-center w-24 h-24 rounded-full ${(t=k.overall_score)?t>=70?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":t>=40?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-slate-100 text-slate-600"}`,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:k.overall_score||"N/A"}),(0,a.jsx)("div",{className:"text-xs uppercase tracking-wide",children:"Health"})]})})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Account Overview"}),(0,a.jsx)(l.BT,{children:"CRM data and key metrics"})]}),(0,a.jsxs)(l.Wu,{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Annual Recurring Revenue"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:["$",k.crm_attributes?.arr?parseInt(k.crm_attributes.arr).toLocaleString():"N/A"]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Contract End Date"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:k.crm_attributes?.contract_end_date||"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Customer Success Manager"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:k.csm_name||"Unassigned"}),k.csm_email&&(0,a.jsx)("p",{className:"text-sm text-slate-500",children:k.csm_email})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-slate-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Industry"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:k.crm_attributes?.industry||"N/A"})]})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Health Score Components"}),(0,a.jsx)(l.BT,{children:"Individual scores contributing to overall health"})]}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:[{label:"Usage Score",value:k.usage_score,icon:f.A,series:V.usage,stroke:"#2563eb",hint:"Feature and session frequency"},{label:"Engagement Score",value:k.engagement_score,icon:v.A,series:V.engagement,stroke:"#0ea5e9",hint:"Meetings, QBRs, email replies"},{label:"Support Score",value:k.support_sentiment_score,icon:g.A,series:V.support,stroke:"#f97316",hint:"Ticket backlog and sentiment"},{label:"Adoption Score",value:k.adoption_score,icon:h.A,series:V.adoption,stroke:"#16a34a",hint:"Breadth across teams and features"}].map(e=>(0,a.jsxs)("div",{className:"space-y-2",title:e.hint,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e.icon,{className:"h-4 w-4 text-slate-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-bold",children:e.value||"N/A"}),(0,a.jsx)(N.Sparkline,{data:e.series,width:110,height:28,stroke:e.stroke})]})]}),(0,a.jsx)("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",title:"Latest score vs target",children:(0,a.jsx)("div",{className:`h-full transition-all ${(e.value||0)>=70?"bg-green-500":(e.value||0)>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.value||0}%`}})})]},e.label))})]}),(0,a.jsxs)(c.Tabs,{defaultValue:"journey",className:"w-full",children:[(0,a.jsxs)(c.TabsList,{className:"grid w-full grid-cols-7",children:[(0,a.jsx)(c.TabsTrigger,{value:"journey",children:"Journey"}),(0,a.jsx)(c.TabsTrigger,{value:"metrics",children:"Metrics"}),(0,a.jsx)(c.TabsTrigger,{value:"health",children:"Health"}),(0,a.jsx)(c.TabsTrigger,{value:"plans",children:"Plans"}),(0,a.jsx)(c.TabsTrigger,{value:"playbooks",children:"Playbooks"}),(0,a.jsx)(c.TabsTrigger,{value:"alerts",children:"Alerts"}),(0,a.jsx)(c.TabsTrigger,{value:"cdi",children:"CDI"})]}),(0,a.jsx)(c.TabsContent,{value:"journey",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Stage Transitions"}),(0,a.jsx)(l.BT,{children:"Historical journey through lifecycle stages"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:0===T.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No journey history recorded yet"}):T.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-4 pb-4 border-b last:border-0",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)(j.A,{className:"h-5 w-5 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.E,{variant:"outline",children:e.from_stage||"Start"}),(0,a.jsx)("span",{className:"text-slate-400",children:"→"}),(0,a.jsx)(o.E,{children:e.to_stage})]}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:e.notes||"Stage transition"}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[(0,A.GP)(new Date(e.entered_at),"MMM dd, yyyy h:mm a"),e.duration_days&&` • ${Math.round(e.duration_days)} days in stage`]})]})]},e.id))})})]})}),(0,a.jsx)(c.TabsContent,{value:"metrics",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Recent Usage Metrics"}),(0,a.jsx)(l.BT,{children:"Product telemetry and activity data"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:0===R.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No usage metrics recorded yet"}):R.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-slate-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.metric_type}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,A.GP)(new Date(e.recorded_at),"MMM dd, yyyy h:mm a")})]})]}),(0,a.jsx)("span",{className:"text-sm font-bold",children:e.metric_value})]},e.id))})})]})}),(0,a.jsx)(c.TabsContent,{value:"health",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Health Trend"}),(0,a.jsx)(l.BT,{children:"Lifecycle-adjusted score over time"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:["Last ",P.length," periods"]}),(0,a.jsx)(N.Sparkline,{data:q})]}),0===P.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No health entries"}):P.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(e.trend??0)>=0?(0,a.jsx)(v.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(b.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.stage||k.current_stage||"Stage"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,A.GP)(new Date(e.window_end),"MMM dd, yyyy")})]})]}),(0,a.jsxs)("div",{className:"text-sm font-bold",children:[Number(e.score).toFixed(2)," (",e.trend??!0?"+":"",(e.trend??0).toFixed(2),")"]})]},e.window_end+e.stage))]})})]})}),(0,a.jsx)(c.TabsContent,{value:"plans",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Success Plans"}),(0,a.jsx)(l.BT,{children:"Goals and steps for this account"})]}),(0,a.jsx)(l.Wu,{children:0===$.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No plans yet"}):(0,a.jsx)("div",{className:"space-y-6",children:$.map(e=>(0,a.jsxs)("div",{className:"border rounded-md p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Target: ",e.target_date||"N/A"," • Status: ",e.status]})]}),(0,a.jsx)(N.PlanProgress,{completed:(Z[e.id]||[]).filter(e=>"done"===e.status).length,total:(Z[e.id]||[]).length})]}),(0,a.jsx)(d.Separator,{className:"my-3"}),Z[e.id]?.length?(0,a.jsx)("div",{className:"space-y-2",children:Z[e.id].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsx)("div",{className:"text-sm",children:e.title}),(0,a.jsx)(o.E,{variant:"outline",children:e.status})]},e.id))}):(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"No steps"})]},e.id))})})]})}),(0,a.jsx)(c.TabsContent,{value:"playbooks",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Playbook Runs"}),(0,a.jsx)(l.BT,{children:"Recent executions for this account"})]}),(0,a.jsx)(l.Wu,{children:0===L.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No runs yet"}):(0,a.jsx)("div",{className:"space-y-2",children:L.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.playbook_name||e.playbook_id}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,A.GP)(new Date(e.created_at),"MMM dd, yyyy h:mm a")})]}),(0,a.jsx)(o.E,{variant:"outline",children:e.status})]},e.id))})})]})}),(0,a.jsx)(c.TabsContent,{value:"alerts",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Alerts"}),(0,a.jsx)(l.BT,{children:"Health dips, negative sentiment, and signals"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"Sentiment trend"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"positive"]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-slate-500"}),"neutral"]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"negative"]})]})]}),(0,a.jsx)(N.SentimentSparkline,{scores:D.map(e=>Number(e.sentiment_score||0))})]}),0===M.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No alerts"}):(0,a.jsx)("div",{className:"space-y-2",children:M.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.message}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:[(0,A.GP)(new Date(e.created_at),"MMM dd, yyyy h:mm a")," • ",e.alert_type]})]}),(0,a.jsx)(o.E,{variant:"critical"===e.severity?"destructive":"outline",children:e.severity})]},e.id))})]})]})}),(0,a.jsx)(c.TabsContent,{value:"cdi",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Unified Data (CDI)"}),(0,a.jsx)(l.BT,{children:"Support, analytics, and CRM signals"})]}),(0,a.jsx)(l.Wu,{children:0===B.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No events"}):(0,a.jsx)("div",{className:"space-y-2",children:B.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.source_type," • ",e.event_type]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:(0,A.GP)(new Date(e.occurred_at),"MMM dd, yyyy h:mm a")})]}),(0,a.jsx)(o.E,{variant:"outline",children:"event"})]},e.id))})})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Quick Actions"})}),(0,a.jsxs)(l.Wu,{className:"space-y-2",children:[(0,a.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Log a Call"]}),(0,a.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Send Email"]}),(0,a.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Schedule Meeting"]}),(0,a.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Change Owner"]}),(0,a.jsx)(w.SendReengagementEmailButton,{accountId:s,context:{account_name:k.name,current_stage:k.current_stage}})]})]}),C.length>0&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Subsidiaries"}),(0,a.jsxs)(l.BT,{children:[C.length," related ",1===C.length?"account":"accounts"]})]}),(0,a.jsx)(l.Wu,{className:"space-y-2",children:C.map(e=>(0,a.jsxs)(S(),{href:`/dashboard/accounts/${e.id}`,className:"flex items-center justify-between p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.current_stage})]}),(0,a.jsxs)(o.E,{variant:"outline",children:["Level ",e.hierarchy_level]})]},e.id))})]}),k.overall_score&&k.overall_score<50&&(0,a.jsxs)(l.Zp,{className:"border-red-200 dark:border-red-900 bg-red-50 dark:bg-red-900/10",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"text-red-700 dark:text-red-400 flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),"At Risk"]})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-300",children:"This account requires immediate attention. Health score is below threshold."}),(0,a.jsx)(m.$,{variant:"destructive",className:"w-full mt-4",children:"Create Success Plan"})]})]})]})]})]})}[n,i]=C.then?(await C)():C,r()}catch(e){r(e)}})},69474:(e,t,s)=>{"use strict";s.d(t,{SendReengagementEmailButton:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call SendReengagementEmailButton() from the server but SendReengagementEmailButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ai-actions.tsx","SendReengagementEmailButton")},20537:(e,t,s)=>{"use strict";s.d(t,{PlanProgress:()=>i,SentimentSparkline:()=>n,Sparkline:()=>a});var r=s(46760);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call Sparkline() from the server but Sparkline is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/sparkline.tsx","Sparkline"),n=(0,r.registerClientReference)(function(){throw Error("Attempted to call SentimentSparkline() from the server but SentimentSparkline is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/sparkline.tsx","SentimentSparkline"),i=(0,r.registerClientReference)(function(){throw Error("Attempted to call PlanProgress() from the server but PlanProgress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/sparkline.tsx","PlanProgress")},7248:(e,t,s)=>{"use strict";s.d(t,{$:()=>f});var r=s(62740),a=s(76301),n=s.t(a,2);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var l=Symbol.for("react.lazy"),o=n[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var d=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(c(s)&&"function"==typeof o&&(s=o(s._payload)),a.isValidElement(s)){var n;let e,l;let o=(n=s,(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref),c=function(e,t){let s={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==a.Fragment&&(c.ref=t?function(...e){return t=>{let s=!1,r=e.map(e=>{let r=i(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():i(e[t],null)}}}}(t,o):o),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:n,...i}=e;c(n)&&"function"==typeof o&&(n=o(n._payload));let l=a.Children.toArray(n),d=l.find(x);if(d){let e=d.props.children,n=l.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...i,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,r.jsx)(t,{...i,ref:s,children:n})});return s.displayName=`${e}.Slot`,s}("Slot"),m=Symbol("radix.slottable");function x(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var u=s(67699),h=s(55946);let p=(0,u.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...n},i)=>{let l=a?d:"button";return(0,r.jsx)(l,{className:(0,h.cn)(p({variant:t,size:s,className:e})),ref:i,...n})});f.displayName="Button"},11844:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ui/separator.tsx","Separator")},36805:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>a,TabsContent:()=>l,TabsList:()=>n,TabsTrigger:()=>i});var r=s(46760);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ui/tabs.tsx","Tabs"),n=(0,r.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ui/tabs.tsx","TabsList"),i=(0,r.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ui/tabs.tsx","TabsTrigger"),l=(0,r.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Extreme SSD/Aro Desk/components/ui/tabs.tsx","TabsContent")},66092:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},82855:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},55326:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},98357:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},8413:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},20796:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(83238).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,720,145,464,527,596,226,654],()=>s(36119));module.exports=r})();