(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{30926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return s.findSourceMapURL}});let a=r(41209),s=r(85153),l=r(77197)},45042:(e,t,r)=>{"use strict";r.d(t,{AdminUserList:()=>d});var a=r(95155),s=r(12115),l=r(30926);let n=(0,l.createServerReference)("601c12054569ec058b222570ae5efcbab51c5e26e1",l.callServer,void 0,l.findSourceMapURL,"toggleUserActive"),i=(0,l.createServerReference)("70ffa2ef0b1b9f333c8bd08c1ba2940e506a4ba926",l.callServer,void 0,l.findSourceMapURL,"updateUserRole"),c=(0,l.createServerReference)("40b47581fc530998e25dcc421676246ec1d6989086",l.callServer,void 0,l.findSourceMapURL,"deleteUser");function d(e){let{users:t,tenants:r}=e,[l,d]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),[m,p]=(0,s.useState)(""),h=async(e,t)=>{x(e),p("");let r=await n(e,!t);r.error&&p(r.error),x(null)},b=async(e,t,r)=>{x(e),p("");let a=await i(e,t,r);a.error?p(a.error):d(null),x(null)},f=async(e,t)=>{if(!confirm("Are you sure you want to delete user ".concat(t,"? This action cannot be undone.")))return;x(e),p("");let r=await c(e);r.error&&p(r.error),x(null)};return(0,a.jsxs)("div",{children:[m&&(0,a.jsx)("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:m}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tenant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tenant_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:l===e.id?(0,a.jsx)(o,{user:e,onSave:b,onCancel:()=>d(null),loading:u===e.id}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:e.role}),e.is_super_admin&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"Super Admin"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.user_created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:l!==e.id&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>d(e.id),disabled:u===e.id,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>h(e.id,e.is_active),disabled:u===e.id,className:"text-yellow-600 hover:text-yellow-900 disabled:opacity-50",children:e.is_active?"Deactivate":"Activate"}),(0,a.jsx)("button",{onClick:()=>f(e.id,e.email),disabled:u===e.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Delete"})]})})]},e.id))})]})}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No users found"})]})}function o(e){let{user:t,onSave:r,onCancel:l,loading:n}=e,[i,c]=(0,s.useState)(t.role),[d,o]=(0,s.useState)(t.is_super_admin);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"Contributor",children:"Contributor"}),(0,a.jsx)("option",{value:"Practitioner",children:"Practitioner"}),(0,a.jsx)("option",{value:"Tenant Admin",children:"Tenant Admin"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:d,onChange:e=>o(e.target.checked),className:"w-3 h-3"}),(0,a.jsx)("span",{className:"text-xs",children:"SA"})]}),(0,a.jsx)("button",{onClick:()=>r(t.id,i,d),disabled:n,className:"text-green-600 hover:text-green-900 text-xs disabled:opacity-50",children:"Save"}),(0,a.jsx)("button",{onClick:l,disabled:n,className:"text-gray-600 hover:text-gray-900 text-xs disabled:opacity-50",children:"Cancel"})]})}},54797:(e,t,r)=>{"use strict";r.d(t,{AddUserForm:()=>i});var a=r(95155),s=r(12115),l=r(30926);let n=(0,l.createServerReference)("400cab6810f0812f6a3e3cbe0185411af4a6108f12",l.callServer,void 0,l.findSourceMapURL,"createUser");function i(e){let{tenants:t}=e,[r,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[m,p]=(0,s.useState)("Viewer"),[h,b]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),w=async e=>{e.preventDefault(),g(!0),y(""),N(!1);let t=await n({email:r,password:i,fullName:d,tenantId:u,role:m,isSuperAdmin:h});g(!1),t.error?y(t.error):(N(!0),l(""),c(""),o(""),x(""),p("Viewer"),b(!1),setTimeout(()=>N(!1),3e3))};return(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>l(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"user@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,a.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>c(e.target.value),required:!0,minLength:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Min. 8 characters"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{type:"text",id:"fullName",value:d,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tenant",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tenant *"}),(0,a.jsxs)("select",{id:"tenant",value:u,onChange:e=>x(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select a tenant"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{id:"role",value:m,onChange:e=>p(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"Contributor",children:"Contributor"}),(0,a.jsx)("option",{value:"Practitioner",children:"Practitioner"}),(0,a.jsx)("option",{value:"Tenant Admin",children:"Tenant Admin"})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:h,onChange:e=>b(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Super Admin"})]})})]}),v&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:v}),j&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md text-sm",children:"User created successfully!"}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Creating...":"Create User"})})]})}},58707:(e,t,r)=>{Promise.resolve().then(r.bind(r,54797)),Promise.resolve().then(r.bind(r,45042))}},e=>{e.O(0,[441,255,358],()=>e(e.s=58707)),_N_E=e.O()}]);