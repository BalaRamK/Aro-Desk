(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{25016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2821),n=r(75889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},30778:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(95155),n=r(12115),a=r(83209),l=r(97003);async function i(){let e=await fetch("/api/diagnostics");if(!e.ok)throw Error((await e.json().catch(()=>({error:"Unknown error"}))).error||"Failed to fetch diagnostics");return e.json()}function o(){let[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(!1);async function c(){o(!0);try{let e=await i();t(e)}catch(e){t({error:e instanceof Error?e.message:"Failed to fetch diagnostics"})}finally{o(!1)}}return(0,s.jsxs)("div",{className:"p-6 space-y-6 max-w-4xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Database Diagnostics"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Check what data exists in your database"})]}),(0,s.jsx)(l.$,{onClick:c,disabled:r,size:"lg",children:r?"Checking...":"Check Database State"}),e&&(0,s.jsx)("div",{className:"space-y-4",children:e.error?(0,s.jsxs)(a.Zp,{className:"border-red-200 bg-red-50",children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{className:"text-red-900",children:"Error"})}),(0,s.jsx)(a.Wu,{className:"text-red-800",children:e.error})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Tenant Information"})}),(0,s.jsx)(a.Wu,{children:(0,s.jsxs)("p",{className:"font-mono text-sm",children:["Tenant ID: ",e.tenantId]})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsxs)(a.ZB,{children:["Accounts (",e.accountsCount,")"]}),(0,s.jsx)(a.BT,{children:"Latest 10 accounts"})]}),(0,s.jsx)(a.Wu,{children:0===e.accountsCount?(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"No accounts found"}):(0,s.jsx)("div",{className:"space-y-2",children:e.accounts.map(e=>(0,s.jsxs)("div",{className:"text-sm p-2 bg-slate-50 rounded",children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:e.name})}),(0,s.jsxs)("div",{className:"text-slate-600",children:["ARR: $",e.arr||"N/A"," | Status: ",e.status," | Parent: ",e.parent_id?"Yes":"No"]})]},e.id))})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsxs)(a.ZB,{children:["Journey Stages (",e.stagesCount,")"]}),(0,s.jsx)(a.BT,{children:"Latest 10 stages"})]}),(0,s.jsx)(a.Wu,{children:0===e.stagesCount?(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"No journey stages found"}):(0,s.jsx)("div",{className:"space-y-2",children:e.stages.map(e=>(0,s.jsxs)("div",{className:"text-sm p-2 bg-slate-50 rounded",children:[(0,s.jsx)("strong",{children:e.display_name})," (",e.stage,")"]},e.id))})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsxs)(a.ZB,{children:["Health Scores (",e.healthScoresCount,")"]}),(0,s.jsx)(a.BT,{children:"Latest 10 health records"})]}),(0,s.jsx)(a.Wu,{children:0===e.healthScoresCount?(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"No health scores found"}):(0,s.jsx)("div",{className:"space-y-2",children:e.healthScores.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm p-2 bg-slate-50 rounded",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("strong",{children:["Score: ",e.overall_score]})}),(0,s.jsxs)("div",{className:"text-slate-600",children:["Account ID: ",e.account_id," | Calculated: ",new Date(e.calculated_at).toLocaleDateString()]})]},t))})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsxs)(a.ZB,{children:["Journey History (",e.journeyHistoryCount,")"]}),(0,s.jsx)(a.BT,{children:"Latest 10 history entries"})]}),(0,s.jsx)(a.Wu,{children:0===e.journeyHistoryCount?(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"No journey history found"}):(0,s.jsx)("div",{className:"space-y-2",children:e.journeyHistory.map((e,t)=>(0,s.jsx)("div",{className:"text-sm p-2 bg-slate-50 rounded",children:(0,s.jsxs)("div",{className:"text-slate-600",children:["Account ID: ",e.account_id," | Entered: ",new Date(e.entered_at).toLocaleDateString()]})},t))})})]})]})})]})}},32467:(e,t,r)=>{"use strict";r.d(t,{DX:()=>u,TL:()=>d});var s,n=r(12115),a=r(94446),l=r(95155),i=Symbol.for("react.lazy"),o=(s||(s=r.t(n,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(c(r)&&"function"==typeof o&&(r=o(r._payload)),n.isValidElement(r)){var l;let e,i,o=(l=r,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),c=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,a.t)(t,o):o),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:s,...a}=e;c(s)&&"function"==typeof o&&(s=o(s._payload));let i=n.Children.toArray(s),d=i.find(f);if(d){let e=d.props.children,s=i.map(t=>t!==d?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...a,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,l.jsx)(t,{...a,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var u=d("Slot"),h=Symbol("radix.slottable");function f(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===h}},70534:(e,t,r)=>{Promise.resolve().then(r.bind(r,30778))},83101:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(2821);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.$,l=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let a=n(t)||n(s);return l[e][a]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return a(e,o,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},83209:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var s=r(95155),n=r(12115),a=r(25016);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},94446:(e,t,r)=>{"use strict";r.d(t,{s:()=>l,t:()=>a});var s=r(12115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,s=e.map(e=>{let s=n(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():n(e[t],null)}}}}function l(...e){return s.useCallback(a(...e),e)}},97003:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(95155),n=r(12115),a=r(32467),l=r(83101),i=r(25016);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:c=!1,...d}=e,u=c?a.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:r})),ref:t,...d})});c.displayName="Button"}},e=>{e.O(0,[909,441,255,358],()=>e(e.s=70534)),_N_E=e.O()}]);