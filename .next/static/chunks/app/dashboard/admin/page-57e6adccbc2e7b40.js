(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},21190:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},21496:(e,t,a)=>{"use strict";a.d(t,{MilestoneManager:()=>j});var s=a(95155),r=a(12115),n=a(83209),i=a(97003),l=a(33789),o=a(90235),d=a(67001),c=a(54679),m=a(47507),u=a(6191),x=a(99051),f=a(21190),p=a(71360),h=a(30926);let g=(0,h.createServerReference)("405ad847e24f80c989823b88db7fc2c172197028d3",h.callServer,void 0,h.findSourceMapURL,"getStageMilestones"),y=(0,h.createServerReference)("6083b1acefccb0e482642ea7385093b6f01a98440e",h.callServer,void 0,h.findSourceMapURL,"updateMilestone"),b=(0,h.createServerReference)("404a2e09c20a4b2bafc95847a634b4922678932de2",h.callServer,void 0,h.findSourceMapURL,"createMilestone"),v=(0,h.createServerReference)("40815dd342be4b2a2672e687cbbc8e04352b1cdae8",h.callServer,void 0,h.findSourceMapURL,"deleteMilestone");function j(e){var t;let{stages:a}=e,[h,j]=(0,r.useState)((null==(t=a[0])?void 0:t.id)||""),[N,w]=(0,r.useState)([]),[k,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),[R,M]=(0,r.useState)({name:"",description:""}),A=a.find(e=>e.id===h);async function D(e){try{let t=await g(e);w(t)}catch(e){console.error("Failed to load milestones",e)}}(0,r.useEffect)(()=>{h&&D(h)},[h]);let F=async e=>{if(e.preventDefault(),!R.name.trim())return void alert("Milestone name is required");try{if(C)await y(C.id,{name:R.name,description:R.description});else{let e=Math.max(...N.map(e=>e.order),0)+1;await b({stageId:h,name:R.name,description:R.description,order:e})}await D(h),S(!1),_(null),M({name:"",description:""})}catch(e){alert("Failed to save milestone")}},z=async e=>{if(confirm("Are you sure you want to delete this milestone?"))try{await v(e),await D(h)}catch(e){alert("Failed to delete milestone")}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Stage Selection"}),(0,s.jsx)(n.BT,{children:"Select a stage to define its mandatory milestones"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)(m.l6,{value:h,onValueChange:j,children:[(0,s.jsx)(m.bq,{id:"milestone_stage","aria-labelledby":"milestone_stage_label",children:(0,s.jsx)(m.yv,{})}),(0,s.jsx)(m.gC,{children:a.map(e=>(0,s.jsx)(m.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:e.color_hex}}),e.name]})},e.id))})]})})]}),A&&(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(n.ZB,{id:"milestone_stage_label",children:["Milestones for ",A.name]}),(0,s.jsx)(n.BT,{children:"Define mandatory goals that accounts must complete in this stage"})]}),(0,s.jsxs)(c.lG,{open:k,onOpenChange:S,children:[(0,s.jsx)(c.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{onClick:()=>{_(null),M({name:"",description:""})},children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Add Milestone"]})}),(0,s.jsxs)(c.Cf,{children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:C?"Edit Milestone":"Create New Milestone"}),(0,s.jsxs)(c.rr,{children:["for ",(0,s.jsx)("strong",{children:A.name})]})]}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"milestone_name",children:"Milestone Name"}),(0,s.jsx)(l.p,{id:"milestone_name",name:"milestone_name",value:R.name,onChange:e=>M({...R,name:e.target.value}),placeholder:"e.g., Complete training, Setup SSO",autoComplete:"off"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"milestone_description",children:"Description"}),(0,s.jsx)(d.T,{id:"milestone_description",name:"milestone_description",value:R.description,onChange:e=>M({...R,description:e.target.value}),placeholder:"What does successful completion look like?",rows:4,autoComplete:"off"})]}),(0,s.jsx)(i.$,{type:"submit",className:"w-full",children:C?"Update Milestone":"Create Milestone"})]})]})]})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("div",{className:"space-y-3",children:0===N.length?(0,s.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No milestones defined yet. Add your first milestone to get started."}):N.map(e=>(0,s.jsxs)("div",{className:"flex items-start gap-4 p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 text-slate-400 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{_(e),M({name:e.name,description:e.description}),S(!0)},children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>z(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]})]},e.id))})})]})]})}},24849:(e,t,a)=>{Promise.resolve().then(a.bind(a,30539)),Promise.resolve().then(a.bind(a,21496)),Promise.resolve().then(a.bind(a,63095)),Promise.resolve().then(a.bind(a,90923)),Promise.resolve().then(a.t.bind(a,52619,23))},25016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},30539:(e,t,a)=>{"use strict";a.d(t,{HealthScoreWeighting:()=>c});var s=a(95155),r=a(12115),n=a(83209),i=a(97003),l=a(33789),o=a(90235);let d=(0,a(71847).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function c(e){let{weighting:t}=e,[a,c]=(0,r.useState)({usage:100*t.usage_weight,engagement:100*t.engagement_weight,support:100*t.support_weight,adoption:100*t.adoption_weight}),[m,u]=(0,r.useState)(!1),x=a.usage+a.engagement+a.support+a.adoption,f=.1>Math.abs(x-100),p=(e,t)=>{c(a=>({...a,[e]:Math.max(0,Math.min(100,t))})),u(!1)},h=async()=>{if(!f)return void alert("Weights must sum to 100%");try{u(!0),setTimeout(()=>u(!1),2e3)}catch(e){alert("Failed to save weights")}};return(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{className:"h-5 w-5"}),"Health Score Configuration"]}),(0,s.jsx)(n.BT,{children:"Adjust the weight of each component in your health score calculation"})]}),(0,s.jsxs)(n.Wu,{className:"space-y-6",children:[(0,s.jsx)("div",{className:"space-y-4",children:[{key:"usage",label:"Usage Score",description:"Product engagement and feature adoption metrics",icon:"\uD83D\uDCCA"},{key:"engagement",label:"Engagement Score",description:"Team collaboration and participation",icon:"\uD83D\uDC65"},{key:"support",label:"Support Score",description:"Support tickets and issue resolution",icon:"\uD83C\uDD98"},{key:"adoption",label:"Adoption Score",description:"Feature and value realization progress",icon:"\uD83D\uDE80"}].map(e=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"weight-".concat(e.key),className:"font-medium text-slate-900 dark:text-slate-100",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:e.description})]}),(0,s.jsxs)("div",{className:"text-sm font-bold text-slate-900 dark:text-slate-100",children:[a[e.key].toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.p,{id:"weight-".concat(e.key),name:"weight_".concat(e.key),type:"range",min:"0","aria-label":"".concat(e.label," weight percentage"),max:"100",step:"1",value:a[e.key],onChange:t=>p(e.key,parseFloat(t.target.value)),className:"flex-1"}),(0,s.jsx)(l.p,{id:"weight-number-".concat(e.key),name:"weight_number_".concat(e.key),type:"number",min:"0",max:"100",value:a[e.key].toFixed(1),onChange:t=>p(e.key,parseFloat(t.target.value)),className:"w-20","aria-label":"".concat(e.label," weight percentage number input")})]})]},e.key))}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(o.J,{className:"font-semibold",children:"Total Weight"}),(0,s.jsxs)("span",{className:"font-bold ".concat(f?"text-green-600":"text-red-600"),children:[x.toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full transition-all ".concat(f?"bg-green-500":"bg-red-500"),style:{width:"".concat(Math.min(x,100),"%")}})}),!f&&(0,s.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"Weights must sum to exactly 100%"})]}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-4 space-y-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Example Health Score Calculation:"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Usage (75) \xd7 ",(a.usage/100).toFixed(2)]}),(0,s.jsxs)("span",{children:["= ",(75*a.usage/100).toFixed(1)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Engagement (80) \xd7 ",(a.engagement/100).toFixed(2)]}),(0,s.jsxs)("span",{children:["= ",(80*a.engagement/100).toFixed(1)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Support (90) \xd7 ",(a.support/100).toFixed(2)]}),(0,s.jsxs)("span",{children:["= ",(90*a.support/100).toFixed(1)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Adoption (70) \xd7 ",(a.adoption/100).toFixed(2)]}),(0,s.jsxs)("span",{children:["= ",(70*a.adoption/100).toFixed(1)]})]}),(0,s.jsxs)("div",{className:"border-t pt-2 flex items-center justify-between font-bold",children:[(0,s.jsx)("span",{children:"Health Score"}),(0,s.jsx)("span",{children:(75*a.usage/100+80*a.engagement/100+90*a.support/100+70*a.adoption/100).toFixed(1)})]})]})]}),(0,s.jsx)(i.$,{onClick:h,disabled:!f,className:"w-full",children:m?"âœ“ Saved":"Save Configuration"})]})]})}},33789:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(95155),r=a(12115),n=a(25016);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},47507:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>m});var s=a(95155),r=a(12115),n=a(74310),i=a(24033),l=a(12108),o=a(5917),d=a(25016);let c=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=n.PP.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=n.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,position:i="popper",...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,s.jsx)(x,{}),(0,s.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(f,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:r})]})});h.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},49476:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},54679:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,L3:()=>f,c7:()=>x,lG:()=>o,rr:()=>p,zM:()=>d});var s=a(95155),r=a(12115),n=a(41590),i=a(65229),l=a(25016);let o=n.bL,d=n.l9,c=n.ZL;n.bm;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=n.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=n.VY.displayName},63095:(e,t,a)=>{"use strict";a.d(t,{StageDesigner:()=>v});var s=a(95155),r=a(12115),n=a(83209),i=a(97003),l=a(67812),o=a(33789),d=a(90235),c=a(54679),m=a(6191),u=a(49476),x=a(21190),f=a(71360),p=a(30926);let h=(0,p.createServerReference)("60415273200a8d3b393ed1548e39f14c20078759d5",p.callServer,void 0,p.findSourceMapURL,"updateJourneyStage"),g=(0,p.createServerReference)("40fb7f43c90d9a15fcbafae1db5f41b8af44556765",p.callServer,void 0,p.findSourceMapURL,"createJourneyStage"),y=(0,p.createServerReference)("40342cf5aec6f70e3c659370cf748d68a15cc0caa4",p.callServer,void 0,p.findSourceMapURL,"deleteJourneyStage");var b=a(20063);function v(e){let{stages:t}=e,[a,p]=(0,r.useState)(t),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),R=(0,b.useRouter)(),[M,A]=(0,r.useState)({name:"",targetDurationDays:30,colorHex:"#3b82f6"}),D=async e=>{if(e.preventDefault(),S(!0),_(null),!M.name.trim()){_("Stage name is required"),S(!1);return}try{if(N)await h(N.id,{name:M.name,targetDurationDays:M.targetDurationDays,colorHex:M.colorHex}),p(a.map(e=>e.id===N.id?{...e,name:M.name,target_duration_days:M.targetDurationDays,color_hex:M.colorHex}:e));else{let e=await g({name:M.name,displayOrder:Math.max(...a.map(e=>e.display_order),0)+1,targetDurationDays:M.targetDurationDays,colorHex:M.colorHex}),t=a.findIndex(t=>t.id===e.id||t.name.toLowerCase()===(e.display_name||"").toLowerCase()),s={id:e.id,name:e.display_name||M.name,display_order:e.display_order,target_duration_days:e.target_duration_days,color_hex:e.color_hex,account_count:0};if(t>=0){let e=[...a];e[t]=s,p(e)}else p([...a,s])}j(!1),w(null),A({name:"",targetDurationDays:30,colorHex:"#3b82f6"}),R.refresh()}catch(e){_(e instanceof Error?e.message:"Failed to save stage")}finally{S(!1)}},F=async e=>{if(confirm("Are you sure you want to delete this stage?")){S(!0);try{await y(e),p(a.filter(t=>t.id!==e)),R.refresh()}catch(e){_(e instanceof Error?e.message:"Failed to delete stage")}finally{S(!1)}}};return(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.ZB,{children:"Journey Stages"}),(0,s.jsx)(n.BT,{children:"Create and customize the lifecycle stages for your accounts"})]}),(0,s.jsxs)(c.lG,{open:v,onOpenChange:j,children:[(0,s.jsx)(c.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{onClick:()=>{w(null),A({name:"",targetDurationDays:30,colorHex:"#3b82f6"})},children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"New Stage"]})}),(0,s.jsxs)(c.Cf,{children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:N?"Edit Stage":"Create New Stage"}),(0,s.jsx)(c.rr,{children:"Define a stage in your customer journey"})]}),C&&(0,s.jsx)("div",{className:"p-3 bg-red-50 text-red-700 rounded text-sm",children:C}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"name",children:"Stage Name"}),(0,s.jsx)(o.p,{id:"name",name:"stage_name",value:M.name,onChange:e=>A({...M,name:e.target.value}),placeholder:"e.g., Onboarding, Adoption",autoComplete:"off",disabled:k})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"targetDays",children:"Target Duration (days)"}),(0,s.jsx)(o.p,{id:"targetDays",name:"target_days",type:"number",value:M.targetDurationDays,onChange:e=>{let t=parseInt(e.target.value);A({...M,targetDurationDays:Number.isNaN(t)?1:Math.max(1,t)})},min:"1",autoComplete:"off",disabled:k})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"color",children:"Color"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{id:"color",name:"color_hex",type:"color",value:M.colorHex,onChange:e=>A({...M,colorHex:e.target.value}),className:"h-10 w-20 cursor-pointer rounded border",autoComplete:"off",disabled:k}),(0,s.jsx)("span",{className:"text-sm text-slate-500",children:M.colorHex})]})]}),(0,s.jsx)(i.$,{type:"submit",className:"w-full",disabled:k,children:k?"Saving...":N?"Update Stage":"Create Stage"})]})]})]})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("div",{className:"space-y-2",children:0===a.length?(0,s.jsx)("p",{className:"text-sm text-slate-500 text-center py-8",children:"No stages created yet. Create your first stage to get started."}):a.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-slate-400 cursor-grab"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:e.color_hex}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:["Target: ",e.target_duration_days," days"]}),e.account_count&&e.account_count>0&&(0,s.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:[e.account_count," ",1===e.account_count?"account":"accounts"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{w(e),A({name:e.name,targetDurationDays:e.target_duration_days,colorHex:e.color_hex}),j(!0)},children:(0,s.jsx)(x.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>F(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]})]},e.id))})})]})}},67001:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var s=a(95155),r=a(12115),n=a(25016);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});i.displayName="Textarea"},67812:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(95155);a(12115);var r=a(83101),n=a(25016);let i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},71360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},83209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>m});var s=a(95155),r=a(12115),n=a(25016);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},90235:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(95155),r=a(12115),n=a(10489),i=a(83101),l=a(25016);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),a),...r})});d.displayName=n.b.displayName},90923:(e,t,a)=>{"use strict";a.d(t,{Tabs:()=>l,TabsContent:()=>c,TabsList:()=>o,TabsTrigger:()=>d});var s=a(95155),r=a(12115),n=a(65218),i=a(25016);let l=n.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.B8,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=n.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...r})});d.displayName=n.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=n.UC.displayName},97003:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(95155),r=a(12115),n=a(32467),i=a(83101),l=a(25016);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,m=d?n.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},99051:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[909,619,753,873,866,58,218,441,255,358],()=>e(e.s=24849)),_N_E=e.O()}]);